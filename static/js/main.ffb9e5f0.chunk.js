(this["webpackJsonpreactjs-graphql-ts"]=this["webpackJsonpreactjs-graphql-ts"]||[]).push([[0],{223:function(e,n,t){},293:function(e,n,t){},306:function(e,n,t){"use strict";t.r(n);var r,c=t(0),o=t.n(c),a=t(36),i=t.n(a),l=(t(223),t(318)),s=t(9),d=function(e){var n=e.children,t=e.loading;return Object(s.jsx)(s.Fragment,{children:t?Object(s.jsx)(l.a,{loading:t,active:t}):Object(s.jsx)(s.Fragment,{children:n})})},u=t(310),j=t(316),b={title:"Search Countries UI",tryAgain:"Try again",list:"List",footer:"Hello globetrotter, this is an exercise made with the stack of: reactjs, typescript and graphql. For this project I have used the api of countries.trevorblades.com, ant design for the UI, react-query for the query management, graphql-request for the graphql client scripts, and router-dom for the routing. Hope you find it useful!",error500:"Ups! Something went wrong. This is very shameful... But maybe it is the backend, not me! Don't blame on me :/. Let's try again.",error404:"Seems that the country you are looking for doesn't exist. Maybe you feel like becoming a founder?"},h={welcome:"Welcome!",description:"Here you can find a list of countries, you can filter them by their country code, their currency code or by continents. To see the details of a country, click on View Details",formCountryLabel:"Country code",formCountryPlaceholder:"Enter country code...",formCurrencyLabel:"Currency code",formCurrencyPlaceholder:"Enter currency code...",formContinentLabel:"Continent",formContinentPlaceholder:"Select continents...",tableColName:"Name",tableColContinent:"Continent",tableColCode:"Code",tableColDetails:"Details",tableButtonViewDetails:"View details"},y={padding:"30px",background:"#fff"},f={width:"100%",maxWidth:"1000px",margin:"0 auto"},m={textAlign:"right"},O={background:"unset"},x=function(e){var n=e.children,t=u.a.Header,r=u.a.Content,c=u.a.Footer;return Object(s.jsxs)(u.a,{children:[Object(s.jsx)(t,{style:O,children:Object(s.jsx)(j.a,{title:b.title})}),Object(s.jsx)(r,{style:y,children:Object(s.jsx)("div",{style:f,children:n})}),Object(s.jsx)(c,{style:m,children:b.footer})]})},g=(t(293),t(122)),C=t(22),v=t(319),p=t(320),w=t(53),k=t.n(w),q=t(200),I=t(75),L=t(120),F=t(171),P=function(){var e=Object(I.a)(k.a.mark((function e(n){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(F.request)("https://countries.trevorblades.com",Object(F.gql)(r||(r=Object(q.a)(["",""])),n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),D=function(e){var n=e.name,t=e.query;return Object(L.useQuery)(n,(function(){return P(t)}))},S=function(e){var n='\n        query GetCountryDetail {\n            country(code:"'.concat(e,'"){\n                name,\n                code,\n                capital,\n                currency,\n                languages{ name },\n                continent{ name }\n            }\n        }\n    '),t=D({name:"Country".concat(e),query:n});return{data:t.data,error:t.error,loading:t.isLoading}},B=t(77),T=function(){var e=Object(C.f)();return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(j.a,{title:b.list,onBack:function(){return e("/")}}),Object(s.jsx)(B.a,{description:b.error404})]})},H=function(){return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(j.a,{title:b.tryAgain,onBack:function(){window.location.reload()}}),Object(s.jsx)(B.a,{description:b.error500})]})},N=function(){var e,n,t,r,c,o,a,i,l,u=Object(C.h)().countryCode,b=Object(C.f)(),h=Object(C.g)(),y=S(u||""),f=y.data,m=y.loading;return y.error?Object(s.jsx)(H,{}):f&&null==f.country?Object(s.jsx)(T,{}):Object(s.jsxs)(d,{loading:m,children:[Object(s.jsx)(j.a,{title:null===f||void 0===f||null===(e=f.country)||void 0===e?void 0:e.name,subTitle:"Details of the country",onBack:function(){b("PUSH"===h?-1:"/")}}),Object(s.jsxs)(v.b,{layout:"vertical",bordered:!0,children:[Object(s.jsx)(v.b.Item,{label:"Code",children:Object(s.jsx)("div",{children:null===f||void 0===f||null===(n=f.country)||void 0===n?void 0:n.code})},"code"),Object(s.jsx)(v.b.Item,{label:"Name",children:null===f||void 0===f||null===(t=f.country)||void 0===t?void 0:t.name},"name"),Object(s.jsx)(v.b.Item,{label:"Continent",children:null===f||void 0===f||null===(r=f.country)||void 0===r?void 0:r.continent.name},"continent"),Object(s.jsx)(v.b.Item,{label:"Capital",children:null===f||void 0===f||null===(c=f.country)||void 0===c?void 0:c.capital},"capital"),Object(s.jsx)(v.b.Item,{label:"Currency",children:null===f||void 0===f||null===(o=f.country)||void 0===o||null===(a=o.currency)||void 0===a?void 0:a.split(",").map((function(e){return Object(s.jsx)(p.a,{children:e},e)}))},"currency"),Object(s.jsx)(v.b.Item,{label:"Languages",children:null===f||void 0===f||null===(i=f.country)||void 0===i||null===(l=i.languages)||void 0===l?void 0:l.map((function(e){return Object(s.jsx)(p.a,{children:e.name},e.name)}))},"languages")]})]})},U=t(5),E=t(1),V=t(7),z=t(317),A=t(313),J=t(314),Q=function(){var e=D({name:"ListContinents",query:"\n        query GetContinents {\n            continents{\n                name,\n                code\n            }\n        }\n    "});return{data:e.data,error:e.error,loading:e.isLoading}},R=function(e){var n=e.search,t="\n        query ListCountries {\n            countries (filter: {\n            ".concat(""!==n.countryCode?'code: {regex: "^'.concat(n.countryCode,'"}'):"",",\n            ").concat(""!==n.currencyCode?'currency: {regex: "^'.concat(n.currencyCode,'"}'):"","\n            ").concat(n.continents.length?"continent: {in: ".concat(JSON.stringify(n.continents),"}"):"","\n            }) {\n                name,\n                code,\n                continent{ name, code }\n            }\n        }\n    "),r=D({name:"ListCountries",query:t});return{data:r.data,error:r.error,loading:r.isLoading,refetch:r.refetch,isRefetching:r.isRefetching}},G=t(315),M=t(311),W=t(312),K=t(205),X=t(124),Y=function(e){var n,t=e.search,r=e.dataContinents,c=e.handleChangeFilter;return Object(s.jsx)(G.a,{layout:"vertical",children:Object(s.jsxs)(M.a,{gutter:6,children:[Object(s.jsx)(W.a,{xs:{span:8},md:{span:5},children:Object(s.jsx)(G.a.Item,{label:h.formCountryLabel,children:Object(s.jsx)(K.a,{allowClear:!0,size:"small",placeholder:h.formCountryPlaceholder,value:t.countryCode,onChange:function(e){return c("countryCode",e.target.value)}})})}),Object(s.jsx)(W.a,{xs:{span:8},md:{span:5},children:Object(s.jsx)(G.a.Item,{label:h.formCurrencyLabel,children:Object(s.jsx)(K.a,{allowClear:!0,size:"small",placeholder:h.formCurrencyPlaceholder,value:t.currencyCode,onChange:function(e){return c("currencyCode",e.target.value)}})})}),Object(s.jsx)(W.a,{xs:{span:24},md:{span:14},children:Object(s.jsx)(G.a.Item,{label:h.formContinentLabel,children:Object(s.jsx)(X.a,{allowClear:!0,mode:"multiple",size:"small",placeholder:h.formContinentPlaceholder,value:t.continents,style:{width:"100%"},onChange:function(e){return c("continents",e)},children:null===r||void 0===r||null===(n=r.continents)||void 0===n?void 0:n.map((function(e){return Object(s.jsx)(X.a.Option,{value:e.code,label:e.name,children:e.name},e.code)}))})})})]})})},Z=function(){var e=Object(g.c)(),n=Object(V.a)(e,2),t=n[0],r=n[1],o=Object(c.useState)({countryCode:t.get("countryCode")||"",currencyCode:t.get("currencyCode")||"",continents:function(){var e,n=null===(e=t.get("continents"))||void 0===e?void 0:e.split(",");return(null===n||void 0===n?void 0:n.length)&&""!==n[0]?n:[]}(),firstFilter:!0}),a=Object(V.a)(o,2),i=a[0],l=a[1],u=R({search:i}),j=u.data,b=u.loading,y=u.error,f=u.refetch,m=u.isRefetching,O=Q(),x=O.data,C=O.loading,v=O.error;Object(c.useEffect)((function(){f()}),[i,f]);var p=[{title:h.tableColName,key:"name",dataIndex:"name"},{title:h.tableColContinent,key:"continent",dataIndex:["continent","name"]},{title:h.tableColCode,key:"code",dataIndex:"code",width:100},{title:h.tableColDetails,key:"details",render:function(e){return Object(s.jsxs)(g.b,{to:"/".concat(e.code),children:[h.tableButtonViewDetails," (",e.code,")"]})}}];return y||v?Object(s.jsx)(H,{}):Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(z.a.Title,{level:3,children:h.welcome}),Object(s.jsx)(z.a.Paragraph,{children:h.description}),Object(s.jsx)(A.a,{}),Object(s.jsx)(Y,{search:i,dataContinents:x,handleChangeFilter:function(e,n){if(!b&&!m){var t,c="string"==typeof n?n.toUpperCase():n,o=Object(E.a)(Object(E.a)({},i),{},(t={},Object(U.a)(t,e,c),Object(U.a)(t,"firstFilter",!1),t)),a={countryCode:o.countryCode,currencyCode:o.currencyCode,continents:o.continents.join(",")};r(a),l(o)}}}),Object(s.jsx)(d,{loading:b||C||m&&!i.firstFilter,children:Object(s.jsx)(J.a,{columns:p,dataSource:null===j||void 0===j?void 0:j.countries,pagination:!1,rowKey:"code"})})]})},$=function(){return Object(s.jsx)(g.a,{children:Object(s.jsxs)(C.c,{children:[Object(s.jsx)(C.a,{path:"/",element:Object(s.jsx)(Z,{})}),Object(s.jsx)(C.a,{path:"/:countryCode",element:Object(s.jsx)(N,{})}),Object(s.jsx)(C.a,{path:"*",element:Object(s.jsx)(T,{})})]})})};var _=function(){return Object(s.jsx)(x,{children:Object(s.jsx)($,{})})},ee=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,321)).then((function(n){var t=n.getCLS,r=n.getFID,c=n.getFCP,o=n.getLCP,a=n.getTTFB;t(e),r(e),c(e),o(e),a(e)}))},ne=function(e){var n=e.children,t=new L.QueryClient;return Object(s.jsx)(L.QueryClientProvider,{client:t,children:n})};i.a.render(Object(s.jsx)(o.a.StrictMode,{children:Object(s.jsx)(ne,{children:Object(s.jsx)(_,{})})}),document.getElementById("root")),ee()}},[[306,1,2]]]);
//# sourceMappingURL=main.ffb9e5f0.chunk.js.map